var nwa_view=null;var nwa_list_html=null;var nwa_product_html=null;$.fn.nwaList=function(e){return this.each(function(){var t=null;var n=/addToCart\('([0-9]*?)'\)/m;var r=n.exec($(this).attr("onclick").toString());if(r!=null){t=parseInt(r[1])}if($.inArray(t,e.out_stock_list)!=-1){$(this).before('<span style="color:red;font-weight:bold">'+e.title+"</span><br/>");if(e.gray_style){if($(this).is("input")){$(this).val(e.text);$(this).css("background","url('image/nwa_button.png') repeat-x scroll left top transparent");$(this).css("background-color","#BEBDBD")}else{$(this).html("<span>"+e.text+"</span>");$(this).css("background","url('image/nwa_button-left.png') top left no-repeat");$(this).find("span").css("background","url('image/nwa_button-right.png') top right no-repeat")}}else{if($(this).is("input")){$(this).val(e.text)}else{$(this).html("<span>"+e.text+"</span>")}}var i="";$(this).attr("onclick","");if(e.show_mode==1||e.show_mode==2){if(e.show_mode==1){i="mouseenter click"}else{i="click"}$(this).bind(i,function(e){$("#nwa_list_product_id").val(t);$("#nwa_list_msg").hide();var n=e.pageY+15;$("#nwa_list").css("top",n+"px");var r=e.pageX+$("#nwa_list").width()>$(window).width()+15?$(window).width()-($("#nwa_list").width()+15):e.pageX-30;$("#nwa_list").css("left",r+"px");$("#nwa_list_container").show("slow");$("#nwa_list_email").focus();e.stopPropagation()})}else if(e.show_mode==3){$(this).click(function(e){location="index.php?route=product/product&product_id="+t})}else if(e.show_mode==4){$("#nwa_list_product_id").val(t);if(!nwa_list_html){nwa_list_html=$("#nwa_list_container").html();$("#nwa_list_container").remove()}$(this).click(function(e){$.colorbox({overlayClose:true,opacity:.5,width:"230px",height:"310px",href:false,html:nwa_list_html});$("#nwa_list_product_id").val(t);setTimeout(function(){$("#nwa_list_email").focus()},300)})}}})};$(function(){if(typeof $.colorbox!="function"){$.getScript("catalog/view/javascript/jquery/nwa_colorbox/jquery.colorbox-min.js");$("head").append('<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/nwa_colorbox/colorbox.css" media="screen" />')}if(typeof $.cookie!="undefined"){nwa_view=$.cookie("display");$(".display").live("hover",function(){setTimeout(function(){if(nwa_view!=$.cookie("display")){location.reload()}},200)})}$("#nwa_list_register,#nwa_list_register span").live("click",function(e){$.ajax({type:"POST",url:"index.php?route=module/notify_when_arrives/register",data:"notify_phone="+$("#nwa_list_phone").val()+"&notify_custom="+$("#nwa_list_custom").val()+"&notify_name="+$("#nwa_list_name").val()+"&notify_email="+$("#nwa_list_email").val()+"&notify_product_id="+$("#nwa_list_product_id").val(),dataType:"json",beforeSend:function(){$("#nwa_list_msg").hide();$("#nwa_list_register").attr("disabled",true);$("#nwa_list_register").after('<span class="wait"> <img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>')},complete:function(){$("#nwa_list_register").attr("disabled",false);$(".wait").remove()},success:function(e){if(e["sucess"]){$("#nwa_list_msg").html('<div style="color:green">'+e["msg"]+"</div>")}else{$("#nwa_list_msg").html('<div style="color:red">'+e["msg"]+"</div>")}$("#nwa_list_msg").show()}})});$("#nwa_product_register").live("click",function(){$.ajax({type:"POST",url:"index.php?route=module/notify_when_arrives/register",data:"notify_phone="+$("#nwa_phone").val()+"&notify_custom="+$("#nwa_custom").val()+"&notify_name="+$("#nwa_name").val()+"&notify_email="+$("#nwa_email").val()+"&notify_product_id="+$("#nwa_product_id").val()+"&notify_option_id="+$("#nwa_option_id").val()+"&notify_option_value_id="+$("#nwa_option_value_id").val(),dataType:"json",beforeSend:function(){$("#nwa_product_register").attr("disabled",true);$("#nwa_msg").hide();$("#nwa_product_register").after('<span class="wait"> <img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>')},complete:function(){$("#nwa_product_register").attr("disabled",false);$(".wait").remove()},success:function(e){if(e["sucess"]){$("#nwa_msg").html('<div style="color:green">'+e["msg"]+"</div>")}else{$("#nwa_msg").html('<div style="color:red">'+e["msg"]+"</div>")}$("#nwa_msg").show()}})});$("#nwa_list_close,#nwa_list_close span,#nwa_product_close,#nwa_product_close span").live("click",function(){if($("#colorbox").is(":hidden")){$("#nwa_list_container").hide("slow")}else{$.colorbox.close()}});$("body").live("click",function(){$("#nwa_list_container").hide("slow")});$("#nwa_list *").live("click",function(e){e.stopPropagation()});$("#nwa_email").live("keyup",function(e){if(e.which==13){$("#nwa_product_register").trigger("click")}});$("#nwa_list_email").live("keyup",function(e){if(e.which==13){$("#nwa_list_register").trigger("click")}})});$.fn.nwaOption=function(e,t,n,r){$("#nwa_product").hide();if(typeof nwa_options[e]!="undefined"&&typeof nwa_options[e][t]!="undefined"){$("#nwa_option_id").val(e);$("#nwa_option_value_id").val(nwa_options[e][t]);if(nwa_title==""){nwa_title=$("#nwa_title").text()}$("#nwa_title").text(n+" : "+r+" "+nwa_title);if($(this).is("input")){$(this).attr("checked",false)}else{$(this).val("")}$("#nwa_product_container").html($("#nwa_product"));$("#nwa_product_close").remove();$("#nwa_product").prependTo($(this).parent().parent()).show("slow");$("#nwa_email").focus()}};$.fn.nwaProduct=function(e){var t=e.button_cart;if($.inArray(e.show_mode,Array(0,1,2))!=-1){$("#nwa_product_container").html($("#nwa_product"));$("#nwa_product_close").remove()}if(e.show_mode==0){$(t).parent().parent().html($("#nwa_product"))}else if(e.show_mode==2){$(t).parent().before($("#nwa_product"))}else if(e.show_mode==3){if(e.gray_style){if($(t).is("input")){$(t).val(e.text);$(t).css("background","url('image/nwa_button.png') repeat-x scroll left top transparent");$(t).css("background-color","#BEBDBD")}else{$(t).html("<span>"+e.text+"</span>");$(t).css("background","url('image/nwa_button-left.png') top left no-repeat");$(t).find("span").css("background","url('image/nwa_button-right.png') top right no-repeat")}}else{if($(t).is("input")){$(t).val(e.text)}else{$(t).html("<span>"+e.text+"</span>")}}if(!nwa_product_html){nwa_product_html=$("#nwa_product_container").html();$("#nwa_product_container").remove()}$(t).parent().html($(t));$(t).before('<span style="color:red;font-weight:bold">'+e.title+"</span>");$(t).unbind();$(t).click(function(e){$.colorbox({overlayClose:true,opacity:.5,width:"230px",height:"310px",href:false,html:nwa_product_html});$("#nwa_product_email").focus()})}else{$(t).parent().html($("#nwa_product"))}$("head").append('<style type="text/css">#shipping{display:none;}</style>')}
function nwaListEvent(e,t,n){if(n==1||n==2){$("#nwa_list_product_id").val(t);$("#nwa_list_msg").hide();var r=e.pageY+15;$("#nwa_list").css("top",r+"px");var i=e.pageX+$("#nwa_list").width()>$(window).width()+15?$(window).width()-($("#nwa_list").width()+15):e.pageX-30;$("#nwa_list").css("left",i+"px");$("#nwa_list_container").show("slow");$("#nwa_list_email").focus();e.stopPropagation()}else if(n==3){location="index.php?route=product/product&product_id="+t}else if(n==4){$("#nwa_list_product_id").val(t);if(!nwa_list_html){nwa_list_html=$("#nwa_list_container").html();$("#nwa_list_container").remove()}$.colorbox({overlayClose:true,opacity:.5,width:"230px",height:"310px",href:false,html:nwa_list_html});$("#nwa_list_product_id").val(t);setTimeout(function(){$("#nwa_list_email").focus()},300)}}var nwa_view=null;var nwa_list_html=null;var nwa_product_html=null;var z=0;$.fn.nwaList=function(e){return this.each(function(){z++;var t=null;var n=/addToCart\('([0-9]*?)'\)/m;var r=n.exec($(this).attr("onclick").toString());if(r!=null){t=parseInt(r[1])}if($.inArray(t,e.out_stock_list)!=-1){$(this).before('<span class="nwa_list_title">'+e.title+"</span><br/>");if(e.gray_style){$(this).addClass("nwa_list_button_custom");if($(this).is("input")){$(this).val(e.text)}else{$(this).html("<span>"+e.text+"</span>")}}else{if($(this).is("input")){$(this).val(e.text)}else{$(this).html("<span>"+e.text+"</span>")}}$(this).attr("onclick","nwa_list("+e.show_mode+");");$(this).attr("onmouseenter","nwa_list("+e.show_mode+");");if(e.show_mode==1){$(this).attr("onclick","nwaListEvent(event,"+t+","+e.show_mode+");");$(this).attr("onmouseenter","nwaListEvent(event,"+t+","+e.show_mode+");")}else{$(this).attr("onclick","nwaListEvent(event,"+t+","+e.show_mode+");")}}})};$(function(){if(typeof $.colorbox!="function"){$.getScript("catalog/view/javascript/jquery/nwa_colorbox/jquery.colorbox-min.js");$("head").append('<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/nwa_colorbox/colorbox.css" media="screen" />')}$("#nwa_list_register,#nwa_list_register span").live("click",function(e){$.ajax({type:"POST",url:"index.php?route=module/notify_when_arrives/register",data:"nwa_captcha="+$("#nwa_list_captcha").val()+"&notify_phone="+$("#nwa_list_phone").val()+"&notify_custom="+$("#nwa_list_custom").val()+"&notify_name="+$("#nwa_list_name").val()+"&notify_email="+$("#nwa_list_email").val()+"&notify_product_id="+$("#nwa_list_product_id").val(),dataType:"json",beforeSend:function(){$("#nwa_list_msg").hide();$("#nwa_list_register").attr("disabled",true);$("#nwa_list_register").after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>')},complete:function(){$("#nwa_list_register").attr("disabled",false);$(".wait").remove()},success:function(e){if(e["sucess"]){$("#nwa_list_msg").html('<div id="nwa_list_success">'+e["msg"]+"</div>")}else{$("#nwa_list_msg").html('<div id="nwa_list_error">'+e["msg"]+"</div>")}$("#nwa_list_msg").show()}})});$("#nwa_product_register").live("click",function(){$.ajax({type:"POST",url:"index.php?route=module/notify_when_arrives/register",data:"nwa_captcha="+$("#nwa_captcha").val()+"&notify_phone="+$("#nwa_phone").val()+"&notify_custom="+$("#nwa_custom").val()+"&notify_name="+$("#nwa_name").val()+"&notify_email="+$("#nwa_email").val()+"&notify_product_id="+$("#nwa_product_id").val()+"&notify_option_id="+$("#nwa_option_id").val()+"&notify_option_value_id="+$("#nwa_option_value_id").val(),dataType:"json",beforeSend:function(){$("#nwa_product_register").attr("disabled",true);$("#nwa_product_msg").hide();$("#nwa_product_register").after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>')},complete:function(){$("#nwa_product_register").attr("disabled",false);$(".wait").remove()},success:function(e){if(e["sucess"]){$("#nwa_product_msg").html('<div id="nwa_product_success">'+e["msg"]+"</div>")}else{$("#nwa_product_msg").html('<div id="nwa_product_error">'+e["msg"]+"</div>")}$("#nwa_product_msg").show()}})});$("#nwa_list_close,#nwa_list_close span,#nwa_product_close,#nwa_product_close span").live("click",function(){if($("#colorbox").is(":hidden")){$("#nwa_list_container").hide("slow")}else{$.colorbox.close()}});$("body").live("click",function(){$("#nwa_list_container").hide("slow")});$("#nwa_list *").live("click",function(e){e.stopPropagation()});$("#nwa_email").live("keyup",function(e){if(e.which==13){$("#nwa_product_register").trigger("click")}});$("#nwa_list_email").live("keyup",function(e){if(e.which==13){$("#nwa_list_register").trigger("click")}})});$.fn.nwaOption=function(e,t,n,r){$("#nwa_product").hide();if(typeof nwa_options[e]!="undefined"&&typeof nwa_options[e][t]!="undefined"){$("#nwa_option_id").val(e);$("#nwa_option_value_id").val(nwa_options[e][t]);$("#nwa_product_box_title").text(nwa_option_title.replace("{option_name}",n+" : "+r));if($(this).is("input")){$(this).attr("checked",false)}else{$(this).val("")}$("#nwa_product_container").html($("#nwa_product"));$("#nwa_product_close").remove();$("#nwa_product").prependTo($(this).parent().parent()).show("slow");$("#nwa_email").focus()}};$.fn.nwaProduct=function(e){var t=e.button_cart;if($.inArray(e.show_mode,Array(0,1,2))!=-1){$("#nwa_product_container").html($("#nwa_product"));$("#nwa_product_close").remove()}if(e.show_mode==0){$(t).parent().parent().html($("#nwa_product"))}else if(e.show_mode==2){$(t).parent().before($("#nwa_product"))}else if(e.show_mode==3){if(e.gray_style){$(t).addClass("nwa_product_button_custom");if($(t).is("input")){$(t).val(e.text)}else{$(t).html("<span>"+e.text+"</span>")}}else{if($(t).is("input")){$(t).val(e.text)}else{$(t).html("<span>"+e.text+"</span>")}}if(!nwa_product_html){nwa_product_html=$("#nwa_product_container").html();$("#nwa_product_container").remove()}$(t).parent().html($(t));$(t).before('<b id="nwa_product_box_title">'+e.title+"</b><br/>");$(t).unbind();$(t).click(function(e){$.colorbox({overlayClose:true,opacity:.5,width:"230px",href:false,html:nwa_product_html});$("#nwa_product_email").focus()})}else{$(t).parent().html($("#nwa_product"))}$("head").append('<style type="text/css">#shipping{display:none;}</style>')}